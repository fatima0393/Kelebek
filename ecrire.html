<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>✍️ اُكتب قصتك | Papillon</title>
  <link rel="stylesheet" href="style1.css">
    <link rel="icon" href="/favicon-32x32.png">

  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDSfwRQ80Ft_DbyVhga244TD4XOi3LE428",
    authDomain: "kelebek-site.firebaseapp.com",
    projectId: "kelebek-site",
    storageBucket: "kelebek-site.firebasestorage.app",
    messagingSenderId: "1005363170368",
    appId: "1:1005363170368:web:8a02a92024cda1ea9fe3a5",
    measurementId: "G-V3GR7YMDJ2"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
  <!-- Firebase App (ضروري) -->
<script type="module">
  // 1. استورد Firebase SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // 2. إعدادات Firebase الخاصة بمشروعك
  const firebaseConfig = {
    apiKey: "🔑",
    authDomain: "🔑",
    projectId: "🔑",
    storageBucket: "🔑",
    messagingSenderId: "🔑",
    appId: "🔑"
  };

  // 3. فعّل Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // 4. دالة لإضافة رواية
  async function ajouterRiwaya(titre, contenu) {
    try {
      await addDoc(collection(db, "riwayat"), {
        titre: titre,
        contenu: contenu
      });
      alert("تمت إضافة الرواية بنجاح!");
    } catch (e) {
      console.error("خطأ في الإضافة: ", e);
    }
  }

  // 5. دالة لعرض الروايات
  async function afficherRiwayat() {
    const container = document.getElementById("conteneur-riwayat");
    const querySnapshot = await getDocs(collection(db, "riwayat"));
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const div = document.createElement("div");
      div.innerHTML = `
        <div class="carte-riwaya">
          <h3>${data.titre}</h3>
          <p>${data.contenu}</p>
        </div>
      `;
      container.appendChild(div);
    });
  }

  // استدعي الدالة إذا كان هناك div عندو id = conteneur-riwayat
  if (document.getElementById("conteneur-riwayat")) {
    afficherRiwayat();
  }

  // يمكنك استعمال ajouterRiwaya("عنوان", "محتوى") لإضافة رواية جديدة من أي زر
</script>

</head>
<body>

  <header class="header-ecrire">
    <div class="logo"><a href="index.html" style="text-decoration: none; color: aliceblue;">Kelebek 🦋</a></div>
    <nav>
      <a href="index.html">الرئيسية</a>
      <a href="livres.html">📖 اقرأ</a>
      <a href="inspirations.html">صور </a>
      <a href="link.html">روابط الكتب</a>

      
    </nav>
  </header>

  <section class="hero-ecrire">
    <h1>✍️ أطلِق العنان لقصتك!</h1>
    <p>شارك خيالك مع مجتمع Papillon</p>
  </section>

  <section class="form-ecrire" id="formulaire">
    <h2 style="texte-align=center" >اكتب في مكتبتك</h2>
    <label>🖼️ صورة القصة:</label>
    <input type="file" id="imageUpload" accept="image/*">
    <img id="preview-image" style="display:none; max-width:100%; margin-top: 15px; border-radius: 10px; border: 2px dashed #ccc;">

    <label>📌 عنوان القصة:</label>
    <input type="text" id="titre" placeholder="أدخل العنوان...">

    <label>📚 النوع الأدبي:</label>
    <select id="genre">
      <option>رومانسية</option>
      <option>دراما</option>
      <option>خيال علمي</option>
      <option>رعب</option>
      <option>السيرة النبوية وسيرة الصحابة</option>
    </select>

    <label>📝 القصة:</label>
    <textarea id="contenu" placeholder="ابدأ بكتابة قصتك هنا..." rows="10"></textarea>

    

    <div class="actions">
      <button onclick="sauvegarder()">💾 حفظ كمسودة</button>
      <button onclick="publier()">🚀 نشر القصة</button>
      <span id="word-count">0 كلمات</span>
    </div>
  

    <div id="preview-area" style="margin-top: 20px;"></div>
  </section>

  <script src="ecrire.js" defer></script>
</body>
</html>
